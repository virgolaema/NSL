CC=gcc #compilatore
DIR = /home/emanuele/Documenti/utility #dove metto le librerie	
CFLAGS = -I. #cerca file in cartella 
CFLAGSD = -I$(DIR) #cerca file in cartella 
DEPS = $(DIR)/lib.h  #dipendenze, tutte
OBJ = /home/emanuele/Documenti/utility/lib.o main.o #lista di file .o
OBJC= $(DIR)/lib.C



LIBS = -lm

# _DEPS = hellomake.h
# DEPS = $(patsubst %,$(IDIR)/%,$(_DEPS))

# _OBJ = hellomake.o hellofunc.o 
#OBJ = $(patsubst %,$(DIR)/%,$(_OBJ))

## %.o: %.C $(DEPS) #tutti i file o dipendono dalle versioni c e dalle dipendenze	$(CC) -c -o $@ $< $(CFLAGS)   


main: $(OBJ)
	$(CC) -o $@ $^ $(CFLAGS)
# $@ says to put the output of the compilation in the file named on the left side of the :	
# $^ indica lato a destra dei :

lib.o: $(OBJC) $(DEPS)
	$(CC) -c -o $@ $< $(CFLAGSD)   

main.o: main.C $(DEPS)
	$(CC) -c $<  

esegui: ./main #eventuali altre dipendenze

.PHONY: clean

clean: #pulizia
	rm -f *.o *~ 

all: lib.o main.o main 